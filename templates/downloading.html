<!DOCTYPE HTML>
<!--
	Spectral by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Spotify Playlist Download</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}">
		<noscript><link rel="stylesheet" href="{{ url_for('static', filename='assets/css/noscript.css') }}"></noscript>
	</head>
	<body class="landing is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header" class="alt">
						<h1><a href="index.html">Spectral</a></h1>
					</header>

				<!-- Banner -->
					<section id="banner">
						<div class="inner">
							<h2 id="innerStatus">Loading...</h2>
                            <p> <b>Please Do Not Reload this Page.</b><br />
                                The process can take some time to complete.<br />
                                Please Be patient while we find and download your songs.<br />
                                <b>Do not close this window.</b><br />
                                Thank you for your patience.
                            </p>
						</div>
					</section>

				<!-- Footer -->
				<footer id="footer">
					<ul class="icons">
						<li><a href="https://github.com/agjignesh" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						<li><a href="https://www.instagram.com/agjignesh/" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="mailto:agjignesh2003@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
					</ul>
				</footer>

			</div>	

		<!-- Scripts -->
            <script>
            var timeout;
            
            async function getStatus() {
            
              let get;
              
              try {
                const res = await fetch("/status");
                get = await res.json();
              } catch (e) {
                console.error("Error: ", e);
              }
              
              document.getElementById("innerStatus").innerHTML = get.status + "&percnt;";
              
              if (get.status == 100){
                document.getElementById("innerStatus").innerHTML += " Done.";
                clearTimeout(timeout);
                window.location.href = "/downloaded"; // Redirect to the /downloaded route
                return false;
              }
               
              timeout = setTimeout(getStatus, 4000);
            }
            
            getStatus();
            </script>    

			<script src="{{ url_for('static', filename='assets/js/jquery.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/jquery.scrollex.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/jquery.scrolly.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/browser.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/breakpoints.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/util.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>

	</body>
</html>